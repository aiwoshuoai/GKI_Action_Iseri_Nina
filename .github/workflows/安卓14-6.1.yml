name: Build GKI A14-6.1 (Bazel Full Version)

permissions:
  contents: write
  actions: write

on:
  workflow_dispatch:
    inputs:
      tag_selection:
        description: "é€‰æ‹©å†…æ ¸ç‰ˆæœ¬ (æ ¼å¼: 6.1.xxx | 2025-02)"
        required: true
        type: choice
        options:
          - "6.1.118 | 2025-01"
          - "6.1.124 | 2025-02"
          - "6.1.128 | 2025-03"
          - "6.1.129 | 2025-04"
          - "6.1.134 | 2025-05"name
          - "6.1.138 | 2025-06"
          - "6.1.141 | 2025-07"
          - "6.1.145 | 2025-08"
          - "6.1.145 | 2025-09"
          - "6.1.157 | 2025-12"
          - "Manual Input"
        default: "6.1.124 | 2025-02"

      manual_version:
        description: "æ‰‹åŠ¨è¾“å…¥æ ¼å¼ï¼š6.1.124 2025-02"
        required: false
        type: string

      version:
        description: "è‡ªå®šä¹‰å†…æ ¸ç‰ˆæœ¬åï¼ˆä¾‹å¦‚ -MyKernelï¼‰"
        required: false
        type: string

      kernelsu_variant:
        description: "é€‰æ‹© KSU å˜ä½“"
        required: true
        type: choice
        options:
          - Official
          - SukiSU
          - ReSukiSU
          - MKSU
        default: ReSukiSU

      kernelsu_branch:
        description: "é€‰æ‹© KernelSU åˆ†æ”¯"
        required: true
        type: choice
        options:
          - Stable
          - Dev
          - builtin
        default: Stable

      use_zram:
        description: "å¯ç”¨ ZRAM (LZ4KD / Oplus / HC / LZ4K)"
        required: true
        type: boolean
        default: true

      use_bbg:
        description: "å¯ç”¨ BasebandGuard (BBG)"
        required: true
        type: boolean
        default: true

      use_better_net:
        description: "å¯ç”¨å¢å¼ºç½‘ç»œæ¨¡å— (IPSET / BPF / IPv6 NAT)"
        required: true
        type: boolean
        default: true

      enable_tmpfs:
        description: "å¯ç”¨ TMPFS XATTR æ”¯æŒ"
        required: true
        type: boolean
        default: true

      bypass_unicode:
        description: "å¯ç”¨ Zero Width Unicode ç»•è¿‡è¡¥ä¸"
        required: true
        type: boolean
        default: true

      cancel_susfs:
        description: "å–æ¶ˆ SUSFSï¼ˆå¦åˆ™è‡ªåŠ¨æ³¨å…¥ï¼‰"
        required: true
        type: boolean
        default: false

      onlyAk3:
        description: "åªæ‰“åŒ… AK3 zip (ä¸ç”Ÿæˆ boot.img)"
        required: false
        type: boolean
        default: true
jobs:
  build-kernel:
    runs-on: ubuntu-latest

    env:
      ANDROID_VERSION: "android14"
      KERNEL_VERSION: "6.1"

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      - name: è§£æç‰ˆæœ¬å‚æ•°
        run: |
          SELECTION="${{ inputs.tag_selection }}"
          MANUAL="${{ inputs.manual_version }}"

          if [[ "$SELECTION" == "Manual Input" ]]; then
            # Manual Input Example: 6.1.124 2025-02
            SUB_LEVEL=$(echo "$MANUAL" | awk '{print $1}' | cut -d. -f3)
            PATCH_LEVEL=$(echo "$MANUAL" | awk '{print $2}')
          else
            SUB_LEVEL=$(echo "$SELECTION" | awk -F'|' '{print $1}' | xargs | cut -d. -f3)
            PATCH_LEVEL=$(echo "$SELECTION" | awk -F'|' '{print $2}' | xargs)
          fi

          echo "SUB_LEVEL=$SUB_LEVEL" >> $GITHUB_ENV
          echo "OS_PATCH_LEVEL=$PATCH_LEVEL" >> $GITHUB_ENV
          echo "CONFIG=android14-6.1-$SUB_LEVEL" >> $GITHUB_ENV

      - name: å®‰è£…æ„å»ºä¾èµ–ï¼ˆåŒ…æ‹¬ Bazelisk ç¯å¢ƒï¼‰
        run: |
          sudo apt update
          sudo apt install -y \
            git curl python3 python-is-python3 \
            build-essential libssl-dev \
            libelf-dev dwarves \
            bison flex lz4 jq unzip ccache

      - name: å®‰è£… Bazeliskï¼ˆGoogle GKI å®˜æ–¹æ¨èï¼‰
        run: |
          sudo curl -Lo /usr/local/bin/bazel \
            https://github.com/bazelbuild/bazelisk/releases/download/v1.19.0/bazelisk-linux-amd64
          sudo chmod +x /usr/local/bin/bazel

          echo "Bazel version:"
          bazel version

      - name: å®‰è£… Repo å·¥å…·
        run: |
          mkdir -p ~/bin
          curl https://storage.googleapis.com/git-repo-downloads/repo > ~/bin/repo
          chmod a+rx ~/bin/repo
          echo "$HOME/bin" >> $GITHUB_PATH

      - name: åˆå§‹åŒ–æ–‡ä»¶å¤¹
        run: |
          mkdir -p $CONFIG
          echo "Workspace created: $CONFIG"
      - name: åŒæ­¥ GKI 6.1 æºç ï¼ˆAndroid 14ï¼ŒæŒ‰æœˆä»½ç²¾ç¡®åŒ¹é…ï¼‰
        run: |
          cd "$CONFIG"

          MANIFEST_BRANCH="common-${{ env.ANDROID_VERSION }}-${{ env.KERNEL_VERSION }}-${{ env.OS_PATCH_LEVEL }}"

          echo "Using manifest branch: $MANIFEST_BRANCH"

          # åˆå§‹åŒ– repoï¼ˆå¼ºåˆ¶ä½¿ç”¨æµ…å…‹éš†ï¼‰
          repo init \
            -u https://android.googlesource.com/kernel/manifest \
            -b $MANIFEST_BRANCH \
            --depth=1 \
            --repo-rev=v2.37

          # å¼€å§‹åŒæ­¥ GKI 6.1 æºç 
          if ! repo sync -c --no-tags --no-clone-bundle -j$(nproc); then
            echo "âŒ ERROR: Manifest $MANIFEST_BRANCH ä¸å­˜åœ¨æˆ–åŒæ­¥å¤±è´¥"
            echo "â–¶ è‡ªåŠ¨ fallback è‡³é€šç”¨åˆ†æ”¯ï¼šcommon-android14-6.1"

            repo init \
              -u https://android.googlesource.com/kernel/manifest \
              -b common-android14-6.1 \
              --depth=1 \
              --repo-rev=v2.37

            repo sync -c --no-tags --no-clone-bundle -j$(nproc)
          fi

          echo "âœ” GKI 6.1 source sync completed."
      - name: å…‹éš† Patch ä»“åº“ (AnyKernel3 / KSU / SUSFS / ZRAM / BBG / Fixes)
        run: |
          cd "$GITHUB_WORKSPACE"

          echo "=== Cloning AnyKernel3 ==="
          git clone https://github.com/WildPlusKernel/AnyKernel3.git -b gki-2.0

          echo "=== Cloning SukiSU patch repository ==="
          git clone https://github.com/ShirkNeko/SukiSU_patch.git

          echo "=== Cloning GKI KernelSU + SUSFS patch repository ==="
          git clone https://github.com/zzh20188/GKI_KernelSU_SUSFS.git zzh_patch

          echo "=== Cloning Xiaomichael patch repo ==="
          git clone https://github.com/Xiaomichael/kernel_patches.git xiaoxiaow_patch

          echo "=== Cloning SUSFS 6.1 (gki-android14-6.1) ==="
          git clone https://github.com/ShirkNeko/susfs4ksu.git -b gki-android14-6.1

          echo "All patch repositories cloned."
      - name: æ³¨å…¥ KernelSU
        run: |
          cd "$CONFIG"

          VARIANT="${{ inputs.kernelsu_variant }}"
          BRANCH="${{ inputs.kernelsu_branch }}"

          echo "æ³¨å…¥ KernelSU:"
          echo " - Variant: $VARIANT"
          echo " - Branch:  $BRANCH"

          case "$VARIANT" in
            "Official")
              KSU_URL="https://raw.githubusercontent.com/tiann/KernelSU/main/kernel/setup.sh"
              ;;
            "SukiSU")
              KSU_URL="https://raw.githubusercontent.com/SukiSU-Ultra/SukiSU-Ultra/main/kernel/setup.sh"
              ;;
            "ReSukiSU")
              KSU_URL="https://raw.githubusercontent.com/ReSukiSU/ReSukiSU/main/kernel/setup.sh"
              ;;
            "MKSU")
              KSU_URL="https://raw.githubusercontent.com/5ec1cff/KernelSU/main/kernel/setup.sh"
              ;;
          esac

          # åˆ†æ”¯å‚æ•°ï¼ˆStable / Dev / builtinï¼‰
          case "$BRANCH" in
            "builtin")
              KSU_ARG="-s builtin"
              ;;
            "Stable")
              KSU_ARG="-s stable"
              ;;
            "Dev")
              KSU_ARG="-s main"
              ;;
            *)
              KSU_ARG="-s stable"
              ;;
          esac

          echo "æ‰§è¡Œ KernelSU æ³¨å…¥è„šæœ¬: $KSU_URL (Args: $KSU_ARG)"

          curl -LSs "$KSU_URL" | bash -s $KSU_ARG

          echo "âœ” KernelSU æ³¨å…¥å®Œæˆ"
      - name: æ³¨å…¥ SUSFS (gki-android14-6.1)
        if: ${{ !inputs.cancel_susfs }}
        run: |
          echo "=== æ³¨å…¥ SUSFS (6.1) ==="
          cd "$CONFIG/common"

          # SUSFS patchï¼ˆ6.1 ç›®å½•ç»“æ„ï¼‰
          PATCH_6_1="../../susfs4ksu/kernel_patches/50_add_susfs_6.1.patch"

          if [ ! -f "$PATCH_6_1" ]; then
            echo "âŒ æ‰¾ä¸åˆ° SUSFS 6.1 patch!"
            exit 1
          fi

          patch -p1 < "$PATCH_6_1"

          echo "âœ” SUSFS 6.1 æ³¨å…¥å®Œæˆ"
      - name: æ³¨å…¥ ZRAM è¡¥ä¸ (for 6.1)
        if: ${{ inputs.use_zram }}
        run: |
          echo "=== æ³¨å…¥ ZRAM (6.1) ==="
          cd "$CONFIG/common"

          # å¤åˆ¶ 6.1 ä¸“ç”¨ ZRAM ç›®å½•è¡¥ä¸
          cp -r ../../SukiSU_patch/other/zram/6.1/* ./

          # æ³¨å…¥ LZ4KD / Oplus é€‚é…è¡¥ä¸
          if [ -f ../../zzh_patch/zram/6.1/lz4kd_6.1.patch ]; then
            patch -p1 < ../../zzh_patch/zram/6.1/lz4kd_6.1.patch || true
          fi

          echo "âœ” ZRAM (LZ4KD / Oplus / HC / LZ4K) æ³¨å…¥å®Œæˆ"
      - name: æ³¨å…¥ BasebandGuard (BBG)
        if: ${{ inputs.use_bbg }}
        run: |
          echo "=== æ³¨å…¥ BBG BasebandGuard ==="
          cd "$CONFIG"
          wget -O- https://github.com/vc-teahouse/Baseband-guard/raw/main/setup.sh | bash
          echo "âœ” BBG æ³¨å…¥å®Œæˆ"
      - name: æ³¨å…¥ Unicode Zero-width ç»•è¿‡è¡¥ä¸
        if: ${{ inputs.bypass_unicode }}
        run: |
          echo "=== æ³¨å…¥ Zero-width Unicode Bypass patch ==="
          cd "$CONFIG/common"

          PATCH_U="../../xiaoxiaow_patch/common/unicode_bypass_6.1.patch"

          if [ -f "$PATCH_U" ]; then
            patch -p1 --fuzz=3 < "$PATCH_U" || true
            echo "âœ” å·²åº”ç”¨ Zero-width Unicode ç»•è¿‡è¡¥ä¸"
          else
            echo "âš  unicode_bypass_6.1.patch æ–‡ä»¶ä¸å­˜åœ¨ï¼Œå·²è·³è¿‡"
          fi
      - name: æ³¨å…¥ BetterNet ç½‘ç»œåŠŸèƒ½å¢å¼º
        if: ${{ inputs.use_better_net }}
        run: |
          echo "=== æ³¨å…¥ BetterNet (IPSET / IPv6 NAT / BPF) ==="
          cd "$CONFIG/common"

          DEF=arch/arm64/configs/gki_defconfig

          echo "CONFIG_IP_SET=y" >> $DEF
          echo "CONFIG_NETFILTER_XT_SET=y" >> $DEF
          echo "CONFIG_IP6_NF_NAT=y" >> $DEF
          echo "CONFIG_IP6_NF_TARGET_MASQUERADE=y" >> $DEF
          echo "CONFIG_BPF_STREAM_PARSER=y" >> $DEF

          echo "âœ” BetterNet é…ç½®å®Œæˆ"
      - name: å¯ç”¨ TMPFS XATTR
        if: ${{ inputs.enable_tmpfs }}
        run: |
          echo "=== å¯ç”¨ TMPFS XATTR ==="
          cd "$CONFIG/common"

          DEF=arch/arm64/configs/gki_defconfig
          echo "CONFIG_TMPFS_XATTR=y" >> $DEF

          echo "âœ” TMPFS XATTR å·²å¯ç”¨"
      - name: ä¿®æ”¹ GKI 6.1 defconfigï¼ˆåŠ å…¥ KSU / SUSFS / ZRAM / BBG ç­‰é…ç½®ï¼‰
        run: |
          echo "=== ä¿®æ”¹ defconfigï¼ˆAndroid14 / GKI 6.1ï¼‰==="
          cd "$CONFIG/common"

          DEF=arch/arm64/configs/gki_defconfig

          echo "" >> $DEF
          echo "# ===== KernelSU / ZRAM / SUSFS / BBG / BetterNet è‡ªåŠ¨é…ç½® =====" >> $DEF

          # KernelSU ä¸»å¼€å…³
          echo "CONFIG_KSU=y" >> $DEF

          # SUSFS
          if [[ "${{ inputs.cancel_susfs }}" == "false" ]]; then
            echo "CONFIG_KSU_SUSFS=y" >> $DEF
            echo "CONFIG_KSU_SUSFS_SUS_PATH=y" >> $DEF
            echo "CONFIG_KSU_SUSFS_SUS_MOUNT=y" >> $DEF
          else
            echo "CONFIG_KSU_MANUAL_HOOK=y" >> $DEF
          fi

          # ZRAMï¼ˆ6.1 æ–°ç»“æ„ï¼‰
          if [[ "${{ inputs.use_zram }}" == "true" ]]; then
            echo "CONFIG_ZSMALLOC=y" >> $DEF
            echo "CONFIG_ZRAM=y" >> $DEF
            echo "CONFIG_ZRAM_DEF_COMP_LZ4KD=y" >> $DEF
            echo "CONFIG_CRYPTO_LZ4K=y" >> $DEF
            echo "CONFIG_CRYPTO_LZ4HC=y" >> $DEF
          fi

          # BBG
          if [[ "${{ inputs.use_bbg }}" == "true" ]]; then
            echo "CONFIG_BBG=y" >> $DEF
          fi

          # BetterNet
          if [[ "${{ inputs.use_better_net }}" == "true" ]]; then
            echo "CONFIG_IP_SET=y" >> $DEF
            echo "CONFIG_NETFILTER_XT_SET=y" >> $DEF
            echo "CONFIG_IP6_NF_NAT=y" >> $DEF
            echo "CONFIG_IP6_NF_TARGET_MASQUERADE=y" >> $DEF
            echo "CONFIG_BPF_STREAM_PARSER=y" >> $DEF
          fi

          # TMPFS XATTR
          if [[ "${{ inputs.enable_tmpfs }}" == "true" ]]; then
            echo "CONFIG_TMPFS_XATTR=y" >> $DEF
          fi

          echo "âœ” defconfig ä¿®æ”¹å®Œæˆ"
      - name: é…ç½® Bazel ç¯å¢ƒå˜é‡ï¼ˆGKI 6.1 å®˜æ–¹æ¨¡å¼ï¼‰
        run: |
          echo "=== é…ç½® Bazel ç¯å¢ƒå˜é‡ ==="
          echo "BAZEL_USE_CPP_ONLY_TOOLCHAIN=1" >> $GITHUB_ENV
          echo "CCACHE_DIR=$HOME/.ccache" >> $GITHUB_ENV
          echo "USE_CCACHE=1" >> $GITHUB_ENV
          echo "âœ” Bazel ç¯å¢ƒå˜é‡å·²è®¾ç½®"
      - name: ä½¿ç”¨ Bazel æ„å»º Kernel (GKI 6.1)
        run: |
          echo "=== ä½¿ç”¨ Bazel æ„å»º Android14 / GKI 6.1 å†…æ ¸ ==="

          cd "$CONFIG"

          # Bazel å¿…é¡»ä½¿ç”¨ hermetic gcc â†’ Google å®˜æ–¹è¦æ±‚
          export BAZEL_USE_CPP_ONLY_TOOLCHAIN=1
          export CCACHE_DIR=$HOME/.ccache
          export USE_CCACHE=1

          echo "å¯åŠ¨ Bazel ç¼–è¯‘â€¦â€¦"

          # ä¸»è¦æ„å»ºç›®æ ‡ï¼šGKI ARM64 å†…æ ¸äº§ç‰©
          bazel build \
            --config=fast \
            --config=distribution \
            //common:kernel_aarch64_dist

          echo "âœ” Bazel build å®Œæˆ"

          # Bazel è¾“å‡ºç›®å½•
          echo "Bazel è¾“å‡ºç›®å½•ï¼š"
          ls -al bazel-bin/common/kernel_aarch64_dist || true
      - name: å°† Bazel äº§ç‰©å¤åˆ¶åˆ° AnyKernel3
        run: |
          echo "=== å¤åˆ¶ Bazel è¾“å‡ºåˆ° AnyKernel3 ==="

          BAZEL_OUT="$CONFIG/bazel-bin/common/kernel_aarch64_dist"

          if [ ! -f "$BAZEL_OUT/Image.lz4" ]; then
            echo "âŒ æ‰¾ä¸åˆ° Image.lz4ï¼Bazel æ„å»ºå¯èƒ½å¤±è´¥"
            exit 1
          fi

          cd "$GITHUB_WORKSPACE/AnyKernel3"

          # Bazel äº§ç‰©æ˜¯ Image.lz4ï¼ˆGKI 6.1 å®˜æ–¹æ ¼å¼ï¼‰
          cp "$BAZEL_OUT/Image.lz4" ./Image.lz4

          # AK3 éœ€è¦ Image.gz æˆ– Image
          echo "=== è§£å‹å¹¶è½¬ä¸º Image.gz ==="
          lz4 -d Image.lz4 Image || true
          gzip -f -9 Image

          echo "âœ” å·²ç”Ÿæˆ Image.gz"
      - name: æ‰“åŒ… AnyKernel3 ZIP
        run: |
          echo "=== æ‰“åŒ… AnyKernel3 ZIP ==="
          cd "$GITHUB_WORKSPACE/AnyKernel3"

          ZIP_NAME="GKI-${{ env.ANDROID_VERSION }}-${{ env.KERNEL_VERSION }}.${{ env.SUB_LEVEL }}-${{ env.OS_PATCH_LEVEL }}-${{ inputs.kernelsu_variant }}.zip"

          zip -r "$ZIP_NAME" ./*

          echo "ZIP_PATH=$GITHUB_WORKSPACE/AnyKernel3/$ZIP_NAME" >> $GITHUB_ENV

          echo "âœ” AnyKernel3 åŒ…æ„å»ºå®Œæˆï¼š$ZIP_NAME"
      - name: ä½¿ç”¨ Bazel è¾“å‡ºåˆ¶ä½œ boot.imgï¼ˆå¯é€‰ï¼‰
        if: ${{ inputs.onlyAk3 == false }}
        run: |
          echo "=== å¼€å§‹åˆ¶ä½œ boot.imgï¼ˆonlyAk3 = falseï¼‰ ==="

          cd "$CONFIG/bazel-bin/common/kernel_aarch64_dist"

          # ç¡®ä¿ Image.lz4 å­˜åœ¨
          if [ ! -f Image.lz4 ]; then
            echo "âŒ Image.lz4 ä¸å­˜åœ¨ï¼Œæ— æ³•æ„å»º boot.img"
            exit 1
          fi

          # è§£å‹ image
          lz4 -d Image.lz4 Image || true
          gzip -f -9 Image

          # ä¸‹è½½ GKI å®˜æ–¹ boot åŸºç¡€åŒ…
          echo "=== ä¸‹è½½ GKI boot è®¤è¯åŒ… ==="

          GKI_BOOT="https://dl.google.com/android/gki/gki-certified-boot-android14-6.1-${{ env.OS_PATCH_LEVEL }}.zip"

          if ! curl -I --silent "$GKI_BOOT" | grep -q "200"; then
            echo "âš  æœªæ‰¾åˆ°å¯¹åº”æœˆä»½ boot åŒ…ï¼Œfallback åˆ° 2024-12"
            GKI_BOOT="https://dl.google.com/android/gki/gki-certified-boot-android14-6.1-2024-12.zip"
          fi

          curl -Lo gki_boot.zip "$GKI_BOOT"
          unzip gki_boot.zip >/dev/null
          rm gki_boot.zip

          if [ ! -f boot.img ]; then
            echo "âŒ GKI boot.img æœªæ‰¾åˆ°ï¼Œé€€å‡º"
            exit 1
          fi

          echo "=== è§£åŒ…å®˜æ–¹ boot.img ==="
          $GITHUB_WORKSPACE/mkbootimg/unpack_bootimg.py --boot_img boot.img

          # åˆ¶ä½œæ–°çš„ boot-new.img
          echo "=== åˆ¶ä½œ boot-new.img ==="
          $GITHUB_WORKSPACE/mkbootimg/mkbootimg.py \
            --header_version 4 \
            --kernel Image.gz \
            --ramdisk out/ramdisk \
            --os_version 14.0.0 \
            --os_patch_level ${{ env.OS_PATCH_LEVEL }} \
            --output boot-new.img

          echo "=== AVB ç­¾å ==="
          $GITHUB_WORKSPACE/kernel-build-tools/linux-x86/bin/avbtool \
            add_hash_footer \
            --partition_name boot \
            --partition_size $((64 * 1024 * 1024)) \
            --image boot-new.img \
            --algorithm SHA256_RSA2048 \
            --key $GITHUB_WORKSPACE/kernel-build-tools/linux-x86/share/avb/testkey_rsa2048.pem

          mv boot-new.img "$GITHUB_WORKSPACE/boot.img"

          echo "âœ” boot.img æ„å»ºå®Œæˆ"
      - name: ä¸Šä¼ å†…æ ¸æ„å»ºäº§ç‰©
        uses: actions/upload-artifact@v4
        with:
          name: Kernel_Build_Output
          path: |
            AnyKernel3/*.zip
            ${{ github.workspace }}/boot.img
            ${{ env.CONFIG }}/bazel-bin/common/kernel_aarch64_dist/Image.lz4
            ${{ env.CONFIG }}/bazel-bin/common/kernel_aarch64_dist/Image
            ${{ env.CONFIG }}/bazel-bin/common/kernel_aarch64_dist/Image.gz
            ${{ env.CONFIG }}/bazel-bin/common/kernel_aarch64_dist/System.map
            ${{ env.CONFIG }}/bazel-bin/common/kernel_aarch64_dist/vmlinux
      - name: ä¿å­˜ Release ä¿¡æ¯
        run: |
          mkdir -p release_info

          echo "v${{ env.KERNEL_VERSION }}.${{ env.SUB_LEVEL }}-${{ env.OS_PATCH_LEVEL }}_${{ github.run_number }}" \
            > release_info/tag_name.txt

          echo "Android 14 GKI ${{ env.KERNEL_VERSION }}.${{ env.SUB_LEVEL }} (${{ env.OS_PATCH_LEVEL }})" \
            > release_info/release_title.txt

          cat <<EOF > release_info/release_body.md
          ### ğŸ“¦ GKI Kernel Build Info

          - **Kernel Version:** 6.1.${{ env.SUB_LEVEL }}
          - **Android Security Patch:** ${{ env.OS_PATCH_LEVEL }}
          - **KernelSU Variant:** ${{ inputs.kernelsu_variant }}
          - **KernelSU Branch:** ${{ inputs.kernelsu_branch }}
          - **ZRAM Enhancement:** ${{ inputs.use_zram }}
          - **BetterNet:** ${{ inputs.use_better_net }}
          - **SUSFS Enabled:** ${{ !inputs.cancel_susfs && 'Yes' || 'No' }}
          - **BBG Enabled:** ${{ inputs.use_bbg }}

          > æœ¬æ„å»ºç”± GitHub Actions è‡ªåŠ¨ç”Ÿæˆ  
          > æ„å»ºç³»ç»Ÿï¼šAndroid14 GKI 6.1ï¼ˆBazelï¼‰
          EOF
      - name: ä¸Šä¼  Release å…ƒæ•°æ®
        uses: actions/upload-artifact@v4
        with:
          name: release_metadata
          path: release_info/
      # === Workflow ä¸»æµç¨‹ç»“æŸ ===
      - name: æ„å»ºå®Œæˆ
        run: |
          echo "========================================"
          echo "âœ” Android 14 / GKI 6.1 Kernel Build å®Œæˆ"
          echo "âœ” KernelSU: ${{ inputs.kernelsu_variant }} (${{ inputs.kernelsu_branch }})"
          echo "âœ” OS Patch Level: ${{ env.OS_PATCH_LEVEL }}"
          echo "âœ” å†…æ ¸å­ç‰ˆæœ¬: 6.1.${{ env.SUB_LEVEL }}"
          echo "========================================"
